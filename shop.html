<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KHUB | Market</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --brand: #4A148C; --brand-light: #7B1FA2; --off-white: #F9F9F9; }
        body { background-color: var(--off-white); font-family: sans-serif; transition: background-color 0.3s, color 0.3s; }
        
        .dark { background-color: #121212; color: white; }
        .dark .bg-white { background-color: #1E1E1E; }
        .dark .text-gray-400 { color: #888; }

        .slogan-text {
            font-family: 'Arial Black', sans-serif;
            font-weight: 900; font-style: italic; letter-spacing: -1px;
            background: linear-gradient(to right, #FFFFFF 20%, #E1BEE7 40%, #BA68C8 50%, #E1BEE7 60%, #FFFFFF 80%);
            background-size: 200% auto; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            animation: shine 3s linear infinite;
        }
        @keyframes shine { to { background-position: 200% center; } }

        .search-container { margin: -25px 20px 0 20px; position: relative; z-index: 60; }
        .search-input {
            width: 100%; padding: 14px 45px; border-radius: 20px; border: none;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1); outline: none; font-size: 14px; background: white;
        }
        .dark .search-input { background: #2D2D2D; color: white; }

        .featured-banner { background: linear-gradient(135deg, #4A148C 0%, #7B1FA2 100%); border-radius: 24px; padding: 20px; margin: 0 16px; color: white; }
        .featured-scroll { display: flex; gap: 15px; overflow-x: auto; padding-bottom: 5px; scrollbar-width: none; }
        .featured-scroll::-webkit-scrollbar { display: none; }
        
        .seller-badge { flex: 0 0 110px; background: rgba(255,255,255,0.1); padding: 12px; border-radius: 20px; text-align: center; border: 1px solid rgba(255,255,255,0.2); position: relative; }
        .badge-img-container { width: 55px; height: 55px; background: rgba(255,255,255,0.2); border-radius: 50%; margin: 0 auto 8px; overflow: hidden; border: 2px solid rgba(255,255,255,0.5); display: flex; align-items: center; justify-content: center; position: relative; }
        .badge-img-container img { width: 100%; height: 100%; object-fit: cover; }

        .category-scroll { display: flex; gap: 12px; overflow-x: auto; padding: 20px; scrollbar-width: none; -ms-overflow-style: none; }
        .category-scroll::-webkit-scrollbar { display: none; }
        .cat-card { min-width: 90px; text-align: center; cursor: pointer; flex-shrink: 0; }
        .cat-icon { width: 50px; height: 50px; background: white; border-radius: 15px; display: flex; align-items: center; justify-content: center; margin: 0 auto 5px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .dark .cat-icon { background: #1E1E1E; }

        .buy-btn { width: 100%; padding: 10px 0; background-color: #25D366; color: white; font-size: 10px; font-weight: 900; border-radius: 12px; text-transform: uppercase; transition: all 0.3s; opacity: 0.2; cursor: not-allowed; }
        .buy-btn.active { opacity: 1; cursor: pointer; box-shadow: 0 4px 12px rgba(37, 211, 102, 0.4); }

        .admin-active .upload-input { display: block; position: absolute; inset: 0; opacity: 0; z-index: 10; cursor: pointer; }
        .admin-active .seller-name { border: 1px dashed white; background: rgba(0,0,0,0.2); }
    </style>
</head>
<body class="pb-32">

    <header class="bg-[#4A148C] p-5 pb-12 space-y-6 shadow-lg sticky top-0 z-50 rounded-b-[35px]">
        <div class="flex justify-between items-center text-white">
            <h1 class="font-black italic text-2xl tracking-tighter uppercase">KHUB <span class="text-[#E1BEE7]">SHOP</span></h1>
            <button onclick="toggleDarkMode()" class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center">
                <i class="fas fa-moon" id="themeIcon"></i>
            </button>
        </div>
        <div class="text-center py-2">
            <h2 class="slogan-text text-xl uppercase">KANO SHOPPING MADE EASY</h2>
        </div>
    </header>

    <div class="search-container">
        <i class="fas fa-search absolute left-5 top-1/2 -translate-y-1/2 text-gray-400"></i>
        <input type="text" id="searchInput" onkeyup="searchProducts()" placeholder="Search items..." class="search-input">
    </div>

    <div class="category-scroll">
        <div class="cat-card" onclick="renderProducts('Phones')"><div class="cat-icon"><i class="fas fa-mobile-alt text-blue-500"></i></div><span class="text-[10px] font-bold">Phones</span></div>
        <div class="cat-card" onclick="renderProducts('Fashion')"><div class="cat-icon"><i class="fas fa-tshirt text-red-500"></i></div><span class="text-[10px] font-bold">Fashion</span></div>
        <div class="cat-card" onclick="renderProducts('Electronics')"><div class="cat-icon"><i class="fas fa-plug text-yellow-500"></i></div><span class="text-[10px] font-bold">Electronics</span></div>
        <div class="cat-card" onclick="renderProducts('Beauty')"><div class="cat-icon"><i class="fas fa-spa text-pink-500"></i></div><span class="text-[10px] font-bold">Beauty</span></div>
        <div class="cat-card" onclick="renderProducts('Homes & Living')"><div class="cat-icon"><i class="fas fa-couch text-orange-500"></i></div><span class="text-[10px] font-bold">Home</span></div>
        <div class="cat-card" onclick="renderProducts('Food & Groceries')"><div class="cat-icon"><i class="fas fa-shopping-basket text-green-600"></i></div><span class="text-[10px] font-bold">Food</span></div>
        <div class="cat-card" onclick="renderProducts('Health')"><div class="cat-icon"><i class="fas fa-heartbeat text-red-600"></i></div><span class="text-[10px] font-bold">Health</span></div>
        <div class="cat-card" onclick="renderProducts('Kids')"><div class="cat-icon"><i class="fas fa-child text-purple-500"></i></div><span class="text-[10px] font-bold">Kids</span></div>
        <div class="cat-card" onclick="renderProducts('Stationary')"><div class="cat-icon"><i class="fas fa-pen-fancy text-gray-600"></i></div><span class="text-[10px] font-bold">Stationary</span></div>
        <div class="cat-card" onclick="renderProducts('Auto & Tools')"><div class="cat-icon"><i class="fas fa-tools text-indigo-500"></i></div><span class="text-[10px] font-bold">Auto</span></div>
        <div class="cat-card" onclick="renderProducts('Art & Crafts')"><div class="cat-icon"><i class="fas fa-palette text-yellow-600"></i></div><span class="text-[10px] font-bold">Art</span></div>
        <div class="cat-card" onclick="renderProducts('Agro')"><div class="cat-icon"><i class="fas fa-seedling text-green-500"></i></div><span class="text-[10px] font-bold">Agro</span></div>
    </div>

    <main class="px-4 mt-4">
        <h2 id="currentCatLabel" class="font-black text-brand dark:text-white uppercase mb-4 tracking-widest text-sm">Phones (50 Items)</h2>
        <div id="shopGrid" class="grid grid-cols-2 gap-4"></div>

        <div class="mt-10 p-6 rounded-3xl bg-white border dark:bg-zinc-900 dark:border-zinc-800">
            <h4 class="font-black uppercase mb-3 text-[#4A148C] dark:text-purple-400 text-xs">Security Agreement & Terms</h4>
            <div class="text-[10px] text-gray-500 space-y-2 mb-4 leading-relaxed">
                <p>1. <strong>Verification:</strong> Buyers must inspect items physically before making any payment to sellers.</p>
                <p>2. <strong>Direct Chat:</strong> KHUB provides a direct link to sellers. We do not process payments on this site.</p>
                <p>3. <strong>Liability:</strong> KHUB is not responsible for losses occurring during private WhatsApp transactions.</p>
            </div>
            
            <div class="flex items-center gap-3 p-4 border-t dark:border-zinc-800">
                <input type="checkbox" id="agreeCheck" onchange="updateButtonStatus()" class="w-6 h-6 accent-purple-800">
                <label for="agreeCheck" class="font-bold text-gray-700 dark:text-gray-300 uppercase text-[9px]">I have read and agree to all terms</label>
            </div>
        </div>
    </main>

    <nav class="fixed bottom-0 w-full bg-white border-t flex justify-around items-center py-4 z-50 dark:bg-[#1E1E1E] dark:border-zinc-800">
        <a href="index.html" class="flex flex-col items-center text-gray-400">
            <i class="fas fa-home text-xl"></i>
            <span class="text-[10px] font-bold">Home</span>
        </a>
        <div class="flex flex-col items-center text-[#4A148C]">
            <i class="fas fa-store text-xl"></i>
            <span class="text-[10px] font-bold">Market</span>
        </div>
        <a href="logistics.html" class="flex flex-col items-center text-gray-400">
            <i class="fas fa-truck-fast text-xl"></i>
            <span class="text-[10px] font-bold">Logistics</span>
        </a>
        <div onclick="window.open('https://wa.me/2347051337399')" class="flex flex-col items-center text-gray-400 cursor-pointer">
            <i class="fab fa-whatsapp text-xl"></i>
            <span class="text-[10px] font-bold">Chat</span>
        </div>
    </nav>

    <script>
        const myWhatsApp = "2347051337399";

        window.onload = () => {
            applySavedTheme();
            renderProducts('Phones');
        };

        function applySavedTheme() {
            const savedTheme = localStorage.getItem('khub_theme');
            const icon = document.getElementById('themeIcon');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark');
                icon.className = 'fas fa-sun text-yellow-400';
            } else {
                document.body.classList.remove('dark');
                icon.className = 'fas fa-moon';
            }
        }

        function toggleDarkMode() {
            document.body.classList.toggle('dark');
            const icon = document.getElementById('themeIcon');
            const isDark = document.body.classList.contains('dark');
            localStorage.setItem('khub_theme', isDark ? 'dark' : 'light');
            icon.className = isDark ? 'fas fa-sun text-yellow-400' : 'fas fa-moon';
        }

        function renderProducts(cat) {
            const grid = document.getElementById('shopGrid');
            const isAgreed = document.getElementById('agreeCheck').checked;
            document.getElementById('currentCatLabel').innerText = `${cat} (50 Items)`;
            grid.innerHTML = '';
            
            for (let i = 1; i <= 50; i++) {
                const price = (i * 200) + 2000;
                grid.innerHTML += `
                <div class="bg-white p-3 rounded-3xl shadow-sm border dark:bg-zinc-900 dark:border-zinc-800">
                    <div class="h-32 bg-gray-50 rounded-2xl mb-2 flex items-center justify-center overflow-hidden">
                        <img src="https://via.placeholder.com/150?text=${cat}+${i}" class="w-full h-full object-cover">
                    </div>
                    <h3 class="text-[10px] font-bold truncate dark:text-white uppercase">${cat} Item #${i}</h3>
                    <div class="text-[#2E7D32] dark:text-green-400 font-black text-sm my-1">â‚¦${price.toLocaleString()}</div>
                    <button onclick="handleBuy('${cat} #${i}', '${price}')" class="buy-btn ${isAgreed ? 'active' : ''}">WhatsApp Buy</button>
                </div>`;
            }
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function updateButtonStatus() {
            const isAgreed = document.getElementById('agreeCheck').checked;
            document.querySelectorAll('.buy-btn').forEach(btn => isAgreed ? btn.classList.add('active') : btn.classList.remove('active'));
        }

        function handleBuy(name, price) {
            if (!document.getElementById('agreeCheck').checked) { alert("Check the Agreement box at the bottom first!"); return; }
            window.open(`https://wa.me/${myWhatsApp}?text=I am interested in ${name} (N${price}) from KHUB Market`);
        }

        function searchProducts() {
            const val = document.getElementById('searchInput').value.toLowerCase();
            document.querySelectorAll('#shopGrid > div').forEach(card => {
                const text = card.querySelector('h3').innerText.toLowerCase();
                card.style.display = text.includes(val) ? "block" : "none";
            });
        }
    </script>
</body>
</html>
